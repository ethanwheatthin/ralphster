Create the 2048 game in Python with no external dependencies with these steps:

game.py

Create a Python script named game.py to implement the game logic.
Use the curses library for terminal-based UI.
Define a 4x4 grid as a 2D list.
Add two random tiles (2 or 4) at the start of the game.
Implement the following features step-by-step, testing after each feature is added:
Features to Implement

Initialize the Grid

Create a function to initialize the 4x4 grid.
Add two random tiles (2 or 4) to the grid.
Display the grid in the terminal.
Test: Verify the grid initializes correctly with two tiles.
Handle User Input

Use arrow keys (up, down, left, right) to control tile movement.
Map key inputs to movement directions.
Test: Ensure key inputs are correctly captured.
Tile Movement Logic

Implement logic to shift tiles in the chosen direction.
Tiles slide as far as possible in the chosen direction.
Test: Verify tiles move correctly without merging.
Tile Merging Logic

Merge adjacent tiles with the same value.
Add merged values to the score.
Ensure only one merge per tile per move.
Test: Verify merging works correctly and updates the score.
Add New Tile

Add a new random tile (2 or 4) after each valid move.
Test: Ensure new tiles are added correctly.
Win and Lose Conditions

Check for a win condition (2048 tile).
Check for a lose condition (no valid moves).
Test: Verify win and lose conditions trigger correctly.
Testing

After implementing each feature, test the script to ensure it works as expected.
Use print statements or a simple test framework to verify functionality.
Focus on Smooth Gameplay

Ensure the game runs smoothly in the terminal.
Display the grid clearly after each move.
Provide feedback for invalid moves.
Game rules:

Tiles slide as far as possible in the chosen direction.
Matching tiles merge into their sum.
Only one merge per tile per move.
A new tile appears after each move.
Win at 2048, but allow the player to continue playing.